{"ast":null,"code":"import _regeneratorRuntime from\"/home/swapnil/Desktop/React/vidly/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/swapnil/Desktop/React/vidly/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import http from\"./httpService\";import{apiUrl}from\"../config.json\";import jwtDecode from\"jwt-decode\";var apiEndpoint=apiUrl+\"/auth\";var tokenKey=\"token\";http.setJwt(getJwt());export function login(_x,_x2){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var _yield$http$post,jwt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return http.post(apiEndpoint,{email:email,password:password});case 2:_yield$http$post=_context.sent;jwt=_yield$http$post.data;localStorage.setItem(tokenKey,jwt);case 5:case\"end\":return _context.stop();}}},_callee);}));return _login.apply(this,arguments);}export function logout(){localStorage.removeItem(tokenKey);}export function getCurrentUser(){try{var jwt=localStorage.getItem(tokenKey);return jwtDecode(jwt);}catch(ex){return null;}}export function loginWithJwt(jwt){localStorage.setItem(tokenKey,jwt);}export function getJwt(){return localStorage.getItem(tokenKey);}export default{login:login,logout:logout,getCurrentUser:getCurrentUser,loginWithJwt:loginWithJwt,getJwt:getJwt};","map":{"version":3,"sources":["/home/swapnil/Desktop/React/vidly/src/components/services/authServices.js"],"names":["http","apiUrl","jwtDecode","apiEndpoint","tokenKey","setJwt","getJwt","login","email","password","post","jwt","data","localStorage","setItem","logout","removeItem","getCurrentUser","getItem","ex","loginWithJwt"],"mappings":"6SAAA,MAAOA,CAAAA,IAAP,KAAiB,eAAjB,CACA,OAASC,MAAT,KAAuB,gBAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CAEA,GAAMC,CAAAA,WAAW,CAAGF,MAAM,CAAG,OAA7B,CACA,GAAMG,CAAAA,QAAQ,CAAG,OAAjB,CAEAJ,IAAI,CAACK,MAAL,CAAYC,MAAM,EAAlB,EAEA,eAAsBC,CAAAA,KAAtB,8C,iFAAO,iBAAqBC,KAArB,CAA4BC,QAA5B,iKACuBT,CAAAA,IAAI,CAACU,IAAL,CAAUP,WAAV,CAAuB,CAAEK,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAvB,CADvB,uCACSE,GADT,kBACGC,IADH,CAELC,YAAY,CAACC,OAAb,CAAqBV,QAArB,CAA+BO,GAA/B,EAFK,sD,wCAKP,MAAO,SAASI,CAAAA,MAAT,EAAkB,CACvBF,YAAY,CAACG,UAAb,CAAwBZ,QAAxB,EACD,CAED,MAAO,SAASa,CAAAA,cAAT,EAA0B,CAC/B,GAAI,CACF,GAAMN,CAAAA,GAAG,CAAGE,YAAY,CAACK,OAAb,CAAqBd,QAArB,CAAZ,CACA,MAAOF,CAAAA,SAAS,CAACS,GAAD,CAAhB,CACD,CAAC,MAAOQ,EAAP,CAAW,CACX,MAAO,KAAP,CACD,CACF,CAED,MAAO,SAASC,CAAAA,YAAT,CAAsBT,GAAtB,CAA2B,CAChCE,YAAY,CAACC,OAAb,CAAqBV,QAArB,CAA+BO,GAA/B,EACD,CACD,MAAO,SAASL,CAAAA,MAAT,EAAkB,CACvB,MAAOO,CAAAA,YAAY,CAACK,OAAb,CAAqBd,QAArB,CAAP,CACD,CAED,cAAe,CACbG,KAAK,CAALA,KADa,CAEbQ,MAAM,CAANA,MAFa,CAGbE,cAAc,CAAdA,cAHa,CAIbG,YAAY,CAAZA,YAJa,CAKbd,MAAM,CAANA,MALa,CAAf","sourcesContent":["import http from \"./httpService\";\nimport { apiUrl } from \"../config.json\";\nimport jwtDecode from \"jwt-decode\";\n\nconst apiEndpoint = apiUrl + \"/auth\";\nconst tokenKey = \"token\";\n\nhttp.setJwt(getJwt());\n\nexport async function login(email, password) {\n  const { data: jwt } = await http.post(apiEndpoint, { email, password });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nexport default {\n  login,\n  logout,\n  getCurrentUser,\n  loginWithJwt,\n  getJwt,\n};\n"]},"metadata":{},"sourceType":"module"}